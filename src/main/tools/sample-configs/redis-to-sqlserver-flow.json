{
  "dataservers": [
    {
      "id": "redis-local",
      "type": "REDIS",
      "url": "redis://localhost:6379",
      "host": "localhost",
      "port": 6379
    },
    {
      "id": "sqlserver-dev",
      "type": "JDBC",
      "url": "jdbc:sqlserver://host:port;trustServerCertificate=true;databaseName=enquirydb;",
      "user": "xxx",
      "password": "xxx",
      "driverClass" : "com.microsoft.sqlserver.jdbc.SQLServerDriver"
    }
  ],
  "flows": [
    {
      "id": "redis-to-sqlserver",
      "source": {
        "server": "redis-local",
        "type": "hash",
        "dataset": "INQUIRY_FORM",
        "idField": "id",
        "tsField": "updatedAt",
        "dataFilter": "status == 'NEW'",
        "queueSize": 10000,
        "tsCheck": true,
        "tsSkipSeconds": 60
      },
      "sink": {
        "server": "sqlserver-dev",
        "type": "table",
        "dataset": "inquiry.form.db",
        "crud": {
          "create": "insert into enquirydb..inquiry_form(id,name,message,status,created_at,updated_at) values (:id,:name,:message,:status,:createdAt,:updatedAt)",
          "read": "select id from enquirydb..inquiry_form where id = :id",
          "update": "update enquirydb..inquiry_form set name = :name, message = :message, status = :status, updated_at = :updatedAt where id = :id"
        }
      },
      "batch": {
        "maxCount": 500,
        "maxMillis": 1000
      }
    }
  ]
}